import React, { useEffect, useState } from "react";
import QuestionWithOption from "./QuestionWithOption";
import { Link } from "react-router-dom";

const QuestionScreen = () => {
    const [restartKey, setRestartKey] = useState(0);
    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
    useEffect(() => {
        localStorage.clear()
        sessionStorage.clear()
    }, [])

    const handleStartAgain = () => {
        // Clear localStorage when starting over
        localStorage.removeItem('userResponses');
        localStorage.clear()
        sessionStorage.clear()
        setRestartKey(prev => prev + 1);
        setCurrentQuestionIndex(0);
    };

    return (
        <>
            <div className=" mx-auto bg-[#BBF3FD] min-h-screen px-[30px] md:px-[89px]">
                <div className="flex justify-between  pt-[75px] sm:pt-8 md:pt-16 md:w-full md-max-w-none w-full">
                    <div className="w-[161px] h-[33px]  z-50 md:hidden block">
                        <Link to='/'>
                            <img
                                src="./Bne25.png"
                                className="w-full h-auto object-contain"
                                alt="Bne25 Logo"
                            />
                        </Link>
                    </div>
                    <div className="w-[400px] h-[81.99px]  z-50 md:block hidden">
                        <Link to='/'>
                            <svg width="342" height="35" viewBox="0 0 342 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M216.221 22.8338H220.211C222.383 22.8338 223.328 21.9613 223.328 20.27C223.328 18.5787 222.284 17.666 220.211 17.666H216.221V22.8204V22.8338ZM216.221 12.7666H219.521C221.466 12.7666 222.51 11.9478 222.51 10.2431C222.51 8.5384 221.551 7.59879 219.605 7.59879H216.221V12.7532V12.7666ZM226.289 14.9546C230.152 15.4512 232.408 17.9613 232.408 21.3573C232.408 25.6929 229.193 28.9949 222.214 28.9949H207.648V1.41083H222.171C227.938 1.41083 231.196 4.29676 231.196 8.75317C231.196 12.176 229.151 14.2431 226.289 14.8606V14.9411V14.9546Z" fill="#12B5EB" />
                                <path d="M253.037 1.41083H261.497V28.9815H253.643L243.279 14.1626H243.195V28.9815H234.692V1.41083H243.026L252.952 16.2297H253.037V1.41083Z" fill="#12B5EB" />
                                <path d="M286.863 28.9815H265.304V1.41083H286.779V8.37732H273.849V12.0149H285.298V18.2029H273.849V22.0016H286.863V28.9815Z" fill="#12B5EB" />
                                <path d="M15.3072 21.3841H15.1662L10.0478 29.0218H0.783936L10.2593 15.1559L1.24924 1.86719H10.8656L15.3918 8.98134H15.561L20.0871 1.86719H29.3087L20.4255 15.0351L29.8586 29.0218H20.3409L15.3072 21.3841Z" fill="#213B54" />
                                <path d="M52.6163 29.0218H31.3955V1.86719H52.5317V8.73972H39.8133V12.3102H51.0794V18.4042H39.8133V22.1492H52.6163V29.0218Z" fill="#213B54" />
                                <path d="M68.592 8.53838H64.4042V13.9478H68.592C70.5942 13.9478 71.7504 13.0887 71.7504 11.1827C71.7504 9.47798 70.7211 8.53838 68.592 8.53838ZM72.9913 29.0218C72.1734 28.0822 71.8773 27.317 71.5812 25.8539L70.989 22.8069C70.6083 20.9009 69.6213 20.3237 67.8729 20.3237H64.4183V29.0218H55.8313V1.86719H69.6636C76.192 1.86719 80.7605 4.26989 80.7605 10.1626C80.7605 14.0686 77.8981 16.4176 74.8243 16.9143V16.9948C77.3482 17.3975 78.8005 18.8203 79.4351 21.3036L80.5067 25.6526C80.8874 27.0754 81.4091 28.0553 82.382 29.0218H72.9913Z" fill="#213B54" />
                                <path d="M91.6459 15.4378C91.6459 19.8673 93.4366 22.5519 96.6797 22.5519C99.9227 22.5519 101.713 19.8673 101.713 15.4378C101.713 11.0082 99.9227 8.32362 96.6797 8.32362C93.4366 8.32362 91.6459 11.0082 91.6459 15.4378ZM110.738 15.4378C110.738 24.0956 105.323 29.505 96.6938 29.505C88.0644 29.505 82.6077 24.0956 82.6077 15.4378C82.6077 6.77999 88.0645 1.38397 96.6797 1.38397C105.295 1.38397 110.724 6.79341 110.724 15.4512" fill="#213B54" />
                                <path d="M126.022 1.38396C132.085 1.38396 136.569 4.35043 137.937 8.98134L130.041 12.1491C129.66 10.0417 128.461 8.36388 125.98 8.36388C123.117 8.36388 121.031 10.5518 121.031 15.4378C121.031 20.3237 123.117 22.5519 125.98 22.5519C128.461 22.5519 129.646 20.8069 130.041 18.6861L137.937 21.8539C136.569 26.5251 132.085 29.4916 126.022 29.4916C117.35 29.4916 111.978 24.0821 111.978 15.4243C111.978 6.76655 117.365 1.35712 126.022 1.35712" fill="#213B54" />
                                <path d="M190.672 1.86719H198.991V29.0218H191.264L181.055 14.431H180.971V29.0218H172.609V1.86719H180.802L190.587 16.4579H190.672V1.86719Z" fill="#213B54" />
                                <path d="M154.801 17.5318C156.634 17.5318 158.114 16.109 158.114 14.3774C158.114 12.6459 156.62 11.223 154.801 11.223C152.982 11.223 151.487 12.6324 151.487 14.3774C151.487 16.1224 152.982 17.5318 154.801 17.5318Z" fill="#12B5EB" />
                                <path d="M154.801 22.6055C150.035 22.6055 146.157 18.9142 146.157 14.3773C146.157 9.84035 150.035 6.14905 154.801 6.14905C159.567 6.14905 163.444 9.84035 163.444 14.3773C163.444 18.9142 159.567 22.6055 154.801 22.6055ZM165.334 4.35038C159.51 -1.19329 150.077 -1.19329 144.268 4.35038C138.445 9.89404 138.445 18.874 144.268 24.4042L154.801 34.4311L165.334 24.4042C171.157 18.8606 171.157 9.88062 165.334 4.35038Z" fill="#12B5EB" />
                                <path d="M317.334 28.9815H294.999V23.0754C304.108 16.8069 308.098 14.0418 308.098 10.4445C308.098 8.83371 307.097 7.71961 305.49 7.71961C303.882 7.71961 302.98 8.83371 302.98 10.2834C302.98 11.0619 303.375 11.7331 303.84 12.3505L296.55 15.1559C295.338 13.8807 294.604 12.0149 294.604 9.90754C294.604 5.23637 298.553 0.914185 305.927 0.914185C313.301 0.914185 316.982 4.95448 316.982 10.2431C316.982 15.5317 312.032 19.3707 306.872 21.9613H317.32V28.9815H317.334Z" fill="#213B54" />
                                <path d="M321.62 1.41081H340.007V8.21623H328.473L328.261 12.3371C329.305 11.5988 331.082 10.9411 332.985 10.9411C338.498 10.9411 341.826 14.525 341.826 19.3573C341.826 26.0821 336.101 29.4647 330.038 29.4647C323.975 29.4647 319.59 26.364 318.504 22.0284L326.358 19.4244C326.527 21.572 328.008 22.9278 329.996 22.9278C331.984 22.9278 333.253 21.6928 333.253 19.5452C333.253 17.6928 332.125 16.4445 330.391 16.4445C329.178 16.4445 328.402 16.9814 327.923 17.5989H320.901L321.634 1.37054L321.62 1.41081Z" fill="#213B54" />
                            </svg>

                        </Link>
                    </div>

                    {currentQuestionIndex > 0 && (
                        <div className="cursor-pointer" onClick={handleStartAgain}>
                            <h1 className="text-[16px] border-b-3 border-[#1BB1E7] TestNational2Bold text-[#213B55]">
                                Start Over
                            </h1>
                        </div>
                    )}

                </div>
                <div className="mt-[87px] md:max-w-[768px] md:mx-auto">
                    <QuestionWithOption
                        key={restartKey}
                        onQuestionChange={setCurrentQuestionIndex}
                    />
                </div>
            </div>
        </>
    )
}
export default QuestionScreen